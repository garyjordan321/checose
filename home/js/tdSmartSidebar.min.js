var tdSmartSidebar={};(function(){tdSmartSidebar={hasItems:!1,items:[],scroll_window_scrollTop_last:0,tds_snap_menu:tdUtil.getBackendVar("tds_snap_menu"),is_enabled:!0,is_enabled_state_run_once:!1,is_disabled_state_run_once:!1,is_tablet_grid:!1,_view_port_current_interval_index:tdViewport.getCurrentIntervalIndex(),item:function(){this.sidebar_jquery_obj=this.content_jquery_obj="",this.sidebar_height=this.sidebar_bottom=this.sidebar_top=0,this.enabled_on=[!1,!1,!1,!1],this.offset=0,this.is_width_auto=[!1,!1,!1,!1],this.content_bottom=this.content_top=0,this.sidebar_state="",this.case_3_run_once=this.case_2_run_once=this.case_1_run_once=!1,this.case_3_last_content_height=this.case_3_last_sidebar_height=0,this.case_4_run_once=!1,this.case_4_last_menu_offset=0,this.case_6_run_once=this.case_5_run_once=!1},add_item:function(a){tdSmartSidebar.hasItems=!0,a.sidebar_jquery_obj.prepend('<div class="clearfix"></div>').append('<div class="clearfix"></div>'),a.content_jquery_obj.prepend('<div class="clearfix"></div>').append('<div class="clearfix"></div>'),tdSmartSidebar.items.push(a)},td_events_scroll:function(a){if(!1!==tdSmartSidebar.hasItems)if(!1===tdSmartSidebar.is_enabled){if(!1===tdSmartSidebar.is_disabled_state_run_once){tdSmartSidebar.is_disabled_state_run_once=!0;for(var b=0;b<tdSmartSidebar.items.length;b++)tdSmartSidebar.items[b].sidebar_jquery_obj.css({width:"auto",position:"static",top:"auto",bottom:"auto"});tdSmartSidebar.log("smart_sidebar_disabled")}}else window.requestAnimationFrame(function(){var f,k,g,e,b,j,d,c,h,i;""!==tdSmartSidebar.tds_snap_menu&&tdAffix._get_menu_affix_height(),f="",a!==tdSmartSidebar.scroll_window_scrollTop_last&&(f=a>tdSmartSidebar.scroll_window_scrollTop_last?"down":"up"),tdSmartSidebar.scroll_window_scrollTop_last=a;for(k=jQuery(window).height(),g=a+k,e=0;e<tdSmartSidebar.items.length;e++){if(b=tdSmartSidebar.items[e],b.content_top=b.content_jquery_obj.offset().top,b.content_height=b.content_jquery_obj.height(),b.content_bottom=b.content_top+b.content_height,b.sidebar_top=b.sidebar_jquery_obj.offset().top,b.sidebar_height=b.sidebar_jquery_obj.height(),b.sidebar_bottom=b.sidebar_top+b.sidebar_height,j="undefined"!=typeof window.tdThemeName?window.tdThemeName:"",d="Newspaper"===j?20:0,"Newspaper"===j){if(!b.sidebar_jquery_obj.closest(".td-main-sidebar")&&!1===b.enabled_on[tdSmartSidebar._view_port_current_interval_index]){b.sidebar_jquery_obj.css({width:"auto",position:"static",top:"auto",bottom:"auto"});continue}if(/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$/.test(b.offset))switch(c=JSON.parse(atob(b.offset)),tdSmartSidebar._view_port_current_interval_index){case 0:d="undefined"!=typeof c.phone?parseInt(c.phone):d;break;case 1:d="undefined"!=typeof c.portrait?parseInt(c.portrait):d;break;case 2:d="undefined"!=typeof c.landscape?parseInt(c.landscape):d;break;case 3:d="undefined"!=typeof c.all?parseInt(c.all):d}else d=b.offset}switch(jQuery("body").hasClass("admin-bar")&&(d=0<tdSmartSidebar._view_port_current_interval_index?d+32:d),c=a+d,b.content_height<=b.sidebar_height?b.sidebar_state="case_6_content_too_small":b.sidebar_height<k?(h=b.content_top,tdAffix.is_menu_affix||"undefined"==typeof window.tdThemeName||"Newsmag"!==window.tdThemeName||"smart_snap_always"!==tdAffix.tds_snap_menu||(h+=d),tdSmartSidebar._is_smaller_or_equal(c,h)?b.sidebar_state="case_2_top_of_content":!0===tdSmartSidebar._is_smaller(b.sidebar_bottom,c)?tdSmartSidebar._is_smaller(c,b.content_bottom-b.sidebar_height)?b.sidebar_state="case_4_fixed_up":b.sidebar_state="case_3_bottom_of_content":tdSmartSidebar._is_smaller_or_equal(b.content_bottom,b.sidebar_bottom)?"up"===f&&tdSmartSidebar._is_smaller_or_equal(c,b.sidebar_top)?b.sidebar_state="case_4_fixed_up":b.sidebar_state="case_3_bottom_of_content":b.sidebar_state=b.content_bottom-c>=b.sidebar_height?"case_4_fixed_up":"case_3_bottom_of_content"):(!0===tdSmartSidebar._is_smaller(b.sidebar_bottom,c)?!0===tdSmartSidebar._is_smaller_or_equal(c,b.sidebar_top)&&!0===tdSmartSidebar._is_smaller_or_equal(b.content_top,c)?b.sidebar_state="case_4_fixed_up":!0===tdSmartSidebar._is_smaller(b.sidebar_bottom,g)&&!0===tdSmartSidebar._is_smaller(b.sidebar_bottom,b.content_bottom)&&b.content_bottom>=g?b.sidebar_state="case_1_fixed_down":b.sidebar_state="case_3_bottom_of_content":!0===tdSmartSidebar._is_smaller(b.sidebar_bottom,g)&&!0===tdSmartSidebar._is_smaller(b.sidebar_bottom,b.content_bottom)&&"down"===f&&b.content_bottom>=g?b.sidebar_state="case_1_fixed_down":!0===tdSmartSidebar._is_smaller_or_equal(b.sidebar_top,b.content_top)&&"up"===f&&b.content_bottom>=g?b.sidebar_state="case_2_top_of_content":!0===tdSmartSidebar._is_smaller_or_equal(b.content_bottom,b.sidebar_bottom)&&"down"===f||b.content_bottom<g?b.sidebar_state="case_3_bottom_of_content":!0===tdSmartSidebar._is_smaller_or_equal(c,b.sidebar_top)&&"up"===f&&!0===tdSmartSidebar._is_smaller_or_equal(b.content_top,c)?b.sidebar_state="case_4_fixed_up":"up"===f&&!0===tdSmartSidebar._is_smaller_or_equal(g,b.sidebar_top)&&(b.sidebar_state="case_2_top_of_content"),"case_1_fixed_down"===b.sidebar_state&&"up"===f||"case_4_fixed_up"===b.sidebar_state&&"down"===f)&&(b.sidebar_state="case_5_absolute"),c=0,null!==tdViewport.getCurrentIntervalItem()&&(h=b.sidebar_jquery_obj.parent(".vc_column, .td-main-sidebar, .vc_column-inner, .vc_column_inner"),i=h.find(".td-sticky-sidebar-placeholder"),"Newspaper"===j?!0===b.is_width_auto[tdSmartSidebar._view_port_current_interval_index]?(b.sidebar_jquery_obj.css("width",""),i.length&&i.css("width",""),c=b.sidebar_jquery_obj.width(),i.length?i.css("width",c):h.prepend('<div class="td-sticky-sidebar-placeholder" style="width:'+c+'px"></div>')):(c=h.width(),i.length&&i.remove()):c=h.width(),b.sidebar_jquery_obj.width(c)),b.sidebar_state){case"case_1_fixed_down":if(!0===b.case_1_run_once)break;tdSmartSidebar.log("sidebar_id: "+e+" "+b.sidebar_state),b.case_1_run_once=!0,b.case_2_run_once=!1,b.case_3_run_once=!1,b.case_4_run_once=!1,b.case_5_run_once=!1,b.case_6_run_once=!1,b.sidebar_jquery_obj.css({width:c,position:"fixed",top:"auto",bottom:"0","z-index":"1"});break;case"case_2_top_of_content":if(!0===b.case_2_run_once)break;tdSmartSidebar.log("sidebar_id: "+e+" "+b.sidebar_state),b.case_1_run_once=!1,b.case_2_run_once=!0,b.case_3_run_once=!1,b.case_4_run_once=!1,b.case_5_run_once=!1,b.case_6_run_once=!1,b.sidebar_jquery_obj.css({width:"auto",position:"static",top:"auto",bottom:"auto"});break;case"case_3_bottom_of_content":if(!0===b.case_3_run_once&&b.case_3_last_sidebar_height===b.sidebar_height&&b.case_3_last_content_height===b.content_height)break;tdSmartSidebar.log("sidebar_id: "+e+" "+b.sidebar_state),b.case_1_run_once=!1,b.case_2_run_once=!1,b.case_3_run_once=!0,b.case_3_last_sidebar_height=b.sidebar_height,b.case_3_last_content_height=b.content_height,b.case_4_run_once=!1,b.case_5_run_once=!1,b.case_6_run_once=!1,b.sidebar_jquery_obj.css({width:c,position:"absolute",top:b.content_bottom-b.sidebar_height-b.content_top,bottom:"auto"});break;case"case_4_fixed_up":if(!0===b.case_4_run_once&&b.case_4_last_menu_offset===d)break;tdSmartSidebar.log("sidebar_id: "+e+" "+b.sidebar_state),b.case_1_run_once=!1,b.case_2_run_once=!1,b.case_3_run_once=!1,b.case_4_run_once=!0,b.case_4_last_menu_offset=d,b.case_5_run_once=!1,b.case_6_run_once=!1,b.sidebar_jquery_obj.css({width:c,position:"fixed",top:d,bottom:"auto"});break;case"case_5_absolute":if(!0===b.case_5_run_once)break;tdSmartSidebar.log("sidebar_id: "+e+" "+b.sidebar_state),b.case_1_run_once=!1,b.case_2_run_once=!1,b.case_3_run_once=!1,b.case_4_run_once=!1,b.case_5_run_once=!0,b.case_6_run_once=!1,b.sidebar_jquery_obj.css({width:c,position:"absolute",top:b.sidebar_top-b.content_top,bottom:"auto"});break;case"case_6_content_too_small":!0!==b.case_6_run_once&&(tdSmartSidebar.log("sidebar_id: "+e+" "+b.sidebar_state),b.case_1_run_once=!1,b.case_2_run_once=!1,b.case_3_run_once=!1,b.case_4_run_once=!1,b.case_5_run_once=!1,b.case_6_run_once=!0,b.sidebar_jquery_obj.css({width:"auto",position:"static",top:"auto",bottom:"auto"}))}}})},compute:function(){tdSmartSidebar.td_events_scroll(jQuery(window).scrollTop())},reset_run_once_flags:function(){for(var a=0;a<tdSmartSidebar.items.length;a++)tdSmartSidebar.items[a].case_1_run_once=!1,tdSmartSidebar.items[a].case_2_run_once=!1,tdSmartSidebar.items[a].case_3_run_once=!1,tdSmartSidebar.items[a].case_3_last_sidebar_height=0,tdSmartSidebar.items[a].case_3_last_content_height=0,tdSmartSidebar.items[a].case_4_run_once=!1,tdSmartSidebar.items[a].case_4_last_menu_offset=0,tdSmartSidebar.items[a].case_5_run_once=!1,tdSmartSidebar.items[a].case_6_run_once=!1},td_events_resize:function(){switch(tdSmartSidebar._view_port_current_interval_index=tdViewport.getCurrentIntervalIndex(),tdSmartSidebar._view_port_current_interval_index){case 0:tdSmartSidebar.is_enabled=!1,tdSmartSidebar.is_enabled_state_run_once=!1;break;case 1:!1===tdSmartSidebar.is_tablet_grid&&(tdSmartSidebar.reset_run_once_flags(),tdSmartSidebar.is_tablet_grid=!0,tdSmartSidebar.is_desktop_grid=!1,tdSmartSidebar.log("view port tablet")),tdSmartSidebar.is_enabled=!0,tdSmartSidebar.is_disabled_state_run_once=!1,!1===tdSmartSidebar.is_enabled_state_run_once&&(tdSmartSidebar.is_enabled_state_run_once=!0,tdSmartSidebar.log("smart_sidebar_enabled"));break;case 2:case 3:!0===tdSmartSidebar.is_tablet_grid&&(tdSmartSidebar.reset_run_once_flags(),tdSmartSidebar.is_tablet_grid=!1,tdSmartSidebar.is_desktop_grid=!0,tdSmartSidebar.log("view port desktop")),tdSmartSidebar.is_enabled=!0,tdSmartSidebar.is_disabled_state_run_once=!1,!1===tdSmartSidebar.is_enabled_state_run_once&&(tdSmartSidebar.is_enabled_state_run_once=!0,tdSmartSidebar.log("smart_sidebar_enabled"))}tdSmartSidebar.compute()},log:function(a){},_is_smaller_or_equal:function(a,b){return!(1<=Math.abs(a-b))||(a<b)},_is_smaller:function(a,b){return 1<=Math.abs(a-b)&&(a<b)}}})()